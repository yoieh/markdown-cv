%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode

\documentclass[11pt, a4paper, titlepage]{article}
\usepackage{fontspec} 

% Silence specific LaTeX warnings
\usepackage{silence}
\WarningFilter{latex}{Command \underbar has changed}
\WarningFilter{latex}{Command \underline has changed}

% DOCUMENT LAYOUT
\usepackage[margin=1.2in]{geometry} 
\setlength\parindent{0in}

% fix for pandoc 1.14
\providecommand{\tightlist}{%
\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Reduce spacing in itemize, enumerate and titles
\usepackage{multicol}
\usepackage{enumitem}
\setenumerate{nolistsep}
\setitemize{nolistsep}

% COLOR
\usepackage{xcolor}
\definecolor{orange}{RGB}{255,127,0}
\definecolor{blue}{RGB}{66,134,244}
\usepackage[colorlinks = true,
            linkcolor = blue,
            urlcolor  = blue,
            citecolor = blue,
            anchorcolor = blue]{hyperref}

% shapes
\usepackage{tikz}

% FONTS
\usepackage{xunicode}
\usepackage{fontspec}
\defaultfontfeatures{Mapping=tex-text} % converts LaTeX specials (quotes'' --- dashes etc.) to unicode
% \setmainfont[Path=/usr/share/fonts/truetype/roboto/hinted/,
%     BoldItalicFont=Roboto-BoldItalic.ttf,
%     BoldFont      =Roboto-Bold.ttf,
%     ItalicFont    =Roboto-MediumItalic.ttf]{Roboto-Regular.ttf}
% \setromanfont[Ligatures={Common}, Numbers={OldStyle}]{Palatino}
% \setmonofont[Scale=1.0]{Monaco} 
% \setsansfont[Scale=1.0]{Optima Regular} 

% HEADINGS and TITLES
% Load ulem first to avoid command redefinition warnings
\usepackage[normalem]{ulem}
\usepackage{sectsty}
\usepackage{graphicx}

% Modified section heading style with custom underline
\sectionfont{\sffamily\mdseries\large}
\renewcommand{\section}[1]{%
  \par\noindent\refstepcounter{section}%
  {\sffamily\mdseries\large #1}%
  \par\noindent\rule{\textwidth}{0.4pt}\par\noindent%
}

\setcounter{secnumdepth}{-1} % Removes the numbers before sections
\subsectionfont{\rmfamily\mdseries\scshape\normalsize}
\subsubsectionfont{\rmfamily\bfseries\upshape\normalsize}

\usepackage{titling}
\title{$if(author)$$author$$endif$}
\date{$if(date)$$date$$endif$}
\author{$if(email)$$email$$endif$\\\
$if(phone)$$phone$$endif$\\\
$if(githubURL)$GitHub: \href{$githubURL$}{github.com/yoieh}$endif$\\\
$if(linkedinURL)$LinkedIn: \href{$linkedinURL$}{linkedin.com/in/johan-nilsson}$endif$
}

% BEGIN DOCUMENT
\begin{document}
\begin{figure}
\centering\tikz\node[shape=circle, minimum size=100mm,
                    text=blue,
                    path picture={
                        \node at (0,-1){ % should be path picture bounding box.south
                            \includegraphics[width=100mm]{$profile$}
                        };
                    }]{};
\end{figure}
\maketitle
\newpage

\begin{raggedright}
$body$
\end{raggedright}
\end{document}
